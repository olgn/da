{
  "name": "permission",
  "version": "1.0.4",
  "description": "Handle user permissions for routes based on roles.",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "ACL",
    "access",
    "control",
    "list",
    "permission",
    "role",
    "permissions",
    "access",
    "auth",
    "authorization",
    "passport",
    "express",
    "authentication"
  ],
  "author": {
    "name": "Tomislav Tenodi",
    "email": "tomislav.tenodi@gmail.com"
  },
  "contributors": [
    {
      "name": "Lubert Theo",
      "email": "theo.lubert@gmail.com"
    }
  ],
  "licenses": [
    {
      "type": "MIT",
      "url": "http://www.opensource.org/licenses/MIT"
    }
  ],
  "repository": {
    "type": "git",
    "url": "https://github.com/tenodi/permission.git"
  },
  "bugs": {
    "url": "https://github.com/tenodi/permission/issues"
  },
  "peerDependencies": {
    "express": "4.x",
    "passport": "0.x",
    "connect-flash": "0.x"
  },
  "readme": "Permission is [Express](http://expressjs.com/) & [Passport](http://passportjs.org/)-compatible authorization\nmiddleware for [Node.js](http://nodejs.org/). It provides customizable management of access control list (ACL).\n\n## Install\n\n    $ npm install --save permission\n\n\n## Usage\n\n#### Fast start\nIt is as simple as `require('permission')`, because you do want to _require permission_, don't you? Don't mess your model nor view with control-specific logic. Pass middleware determing which roles user needs to have!\n``` js\nrouter.get('/', require('permission')(['admin']), function(req, res) {\n    res.render('stats');\n})\n```\n\nPass an array determining which roles one controller supports. \nPass an empty array to ensure nobody has access, even when authenticated. \nLeave empty if you want to allow any role to be authorized, but still to be authenticated (signed in).\n\n``` js\nrouter.get('/', require('permission')(), function(req, res) {\n    res.render('profile');\n})\n```\n\nFill out array with more roles, if needed.\n``` js\nrouter.get('/', require('permission')(['admin', 'user']), function(req, res) {\n    res.render('schools');\n})\n```\n\n#### Advantage start\nThere are _permission_ options some of which you'll most likely want to customize. You can do so by setting _permission_ name in Express' _app_ object:\n``` js\napp.set('permission', {role: 'myRole'});\n```\nIt is optional to customize any option, but when done so, customized option needs to follow its interface. \nHere you can find listed all the properties that you may customize:\n\n**role**\nDefines property name for Express' user. Defaults to ```role```.\n\n**notAuthenticated**\nDefines what to do with non-authenticated user. Both ```notAuthenticated``` and ```notAuthorized``` (see below) implement the same interface. This interface consists of 4 properties:\n\n- ```flashType``` {string}: type of the [Flash](https://www.npmjs.com/package/connect-flash) message\n- ```message``` {string}: flash message\n- ```redirect``` {string}: URL or path for [Express](https://www.npmjs.com/package/express) redirection\n- ```status``` {number}: HTTP status for response\n\nNot all the properties are needed to be present at the same time. See [control flow](https://www.npmjs.com/package/permission#control-flow) for more information.\n\nOnly ```status``` property of ```notAuthenticated``` is set by default to value ```401```.\n\n**notAuthorized**\nDefines what to do with non-authorized user. Shares the same interface with ```notAuthenticated```. \nOnly ```status``` property of ```notAuthorized``` is set by default to value ```403```.\n\n**after**\nDefines custom callback function to be called upon determining the state of user authentication/authorization. This is the function's skeleton:\n\n``` js\nfunction(req, res, next, authorizedStatus){}\n```\nArguments ```req```, ```res``` and ```next``` are Express objects, while ```authorizedStatus``` refers to one of the following values:\n\n- ```authorized``` : user has been successfully authorized\n- ```notAuthenticated``` : user has failed to authenticate.\n- ```notAuthorized``` : user has been successfully authenticated, but failed to authorize.\n\nThis allows you to organise logic based on authorized status of the user.\nYou can access these constants with:\n``` js\nvar p = require('permission')\np.AUTHORIZED === 'authorized' // true\np.NOT_AUTHENTICATED === 'notAuthenticated' // true\np.NOT_AUTHORIZED === 'notAuthorized' // true\n```\n\n#### Control flow\nIt is noted that you don't need to customize any _permission_ option. But, if you want to, not all of them are needed. This section explains the control flow:\n\nAfter _permission_ has determined user's authorized status, it:\n\n1. calls ```after``` and passes it ```authorizedStatus```\n2. if ```after``` is not provided, calls Express ```res.redirect()``` with ```redirect``` value and sets Flash message\n3. if ```redirect``` of specific state is not provided, calls Express ```res.status()``` with ```status```.\n\n#### Example\nThis example shows how _permission_ options can be used: we want to redirect user with message if he fails to authenticate and send ```HTTP status 403``` if he fails to authorize.\n``` js\nvar notAuthenticated = {\n\tflashType: 'error',\n\tmessage: 'The entered credentials are incorrect',\n\tredirect: '/login'\n};\n\napp.set('permission', {\n\trole: 'userRole',\n\tnotAuthenticated: notAuthenticated \n});\n```\nNot that we used defaults ```HTTP status``` for authorization fail. \n\n\n## Contribution\nIf you want to suggest something, make a pull request or contribute in any other form, you're welcome to do so @ GitHub's [repository](https://github.com/ttenodi/permission).",
  "readmeFilename": "README.md",
  "_id": "permission@1.0.4",
  "dist": {
    "shasum": "33c0f931a6072215f8d7756621896b4533c6b542"
  },
  "_from": "permission@",
  "_resolved": "https://registry.npmjs.org/permission/-/permission-1.0.4.tgz"
}
